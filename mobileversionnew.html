<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Keuangan Mobile</title>

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: #f4f6f9;
}

/* HEADER */
.header {
    background: linear-gradient(135deg, #4e73df, #1cc88a);
    color: white;
    padding: 25px 20px;
    border-radius: 0 0 25px 25px;
    text-align: center;
}

.header h2 { margin: 0; }

.saldo {
    font-size: 28px;
    font-weight: bold;
    margin-top: 8px;
}

.total {
    font-size: 14px;
    margin-top: 5px;
    opacity: 0.9;
}

/* CONTAINER */
.container {
    padding: 15px;
    padding-bottom: 80px;
}

/* WALLET */
.wallet-scroll {
    display: flex;
    overflow-x: auto;
    gap: 10px;
    margin-bottom: 15px;
}

.wallet-scroll button {
    flex: none;
    padding: 8px 14px;
    border: none;
    border-radius: 20px;
    background: #e3e6f0;
    font-weight: bold;
    cursor: pointer;
}

.wallet-active {
    background: #4e73df !important;
    color: white;
}

/* CARD */
.card {
    background: white;
    padding: 15px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    margin-bottom: 15px;
}

input, select {
    width: 100%;
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 10px;
    border: 1px solid #ddd;
}

button.primary {
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 12px;
    background: #4e73df;
    color: white;
    font-weight: bold;
}

button.danger {
    width: 100%;
    padding: 10px;
    border: none;
    border-radius: 10px;
    background: #e74a3b;
    color: white;
    margin-top: 5px;
}

/* RIWAYAT */
.item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding: 10px;
    background: #f8f9fc;
    border-radius: 10px;
}

.item-left {
    flex: 1;
}

.hapus-btn {
    background: none;
    border: none;
    color: #e74a3b;
    font-size: 18px;
    cursor: pointer;
}

.masuk { color: #1cc88a; font-weight: bold; }
.keluar { color: #e74a3b; font-weight: bold; }

/* BOTTOM NAV */
.bottom-nav {
    position: fixed;
    bottom: 0;
    width: 100%;
    background: white;
    display: flex;
    justify-content: space-around;
    padding: 10px 0;
    box-shadow: 0 -5px 10px rgba(0,0,0,0.1);
}

.bottom-nav button {
    border: none;
    background: none;
    font-size: 14px;
    font-weight: bold;
    color: #858796;
}

.bottom-nav button.active {
    color: #4e73df;
}
</style>
</head>

<body>

<div class="header">
    <h2 id="namaWallet">Tabungan</h2>
    <div class="saldo" id="saldo">Rp 0</div>
    <div class="total" id="totalSemua">Total Semua Dompet: Rp 0</div>
</div>

<div class="container">

    <div class="wallet-scroll">
        <button onclick="gantiWallet('Tabungan',this)" class="wallet-active">Tabungan</button>
        <button onclick="gantiWallet('Jajan',this)">Jajan</button>
        <button onclick="gantiWallet('Darurat',this)">Darurat</button>
        <button onclick="gantiWallet('Investasi',this)">Investasi</button>
    </div>

    <div class="card">
        <select id="tipe">
            <option value="masuk">Pemasukan</option>
            <option value="keluar">Pengeluaran</option>
        </select>

        <input type="number" id="jumlah" placeholder="Jumlah uang">
        <input type="text" id="keterangan" placeholder="Keterangan">

        <button class="primary" onclick="tambahTransaksi()">Simpan</button>
        <button class="danger" onclick="resetData()">Reset Wallet</button>
    </div>

    <div id="riwayat"></div>

</div>

<div class="bottom-nav">
    <button class="active">üè† Home</button>
    <button onclick="tampilkanStatistika()">üìä Statistik</button>
</div>

<script>
const PASSWORD = "03032009";
let currentWallet = "Tabungan";

let dataWallets = JSON.parse(localStorage.getItem("dataWallets")) || {
    Tabungan:{saldo:0, transaksi:[]},
    Jajan:{saldo:0, transaksi:[]},
    Darurat:{saldo:0, transaksi:[]},
    Investasi:{saldo:0, transaksi:[]}
};

updateTampilan();

function gantiWallet(nama, el){
    currentWallet = nama;
    document.getElementById("namaWallet").innerText = nama;

    document.querySelectorAll(".wallet-scroll button")
    .forEach(btn=>btn.classList.remove("wallet-active"));

    el.classList.add("wallet-active");
    updateTampilan();
}

function tambahTransaksi(){
    let tipe=document.getElementById("tipe").value;
    let jumlah=parseInt(document.getElementById("jumlah").value);
    let ket=document.getElementById("keterangan").value;

    if(!jumlah || ket===""){alert("Isi data!");return;}

    let w=dataWallets[currentWallet];

    if(tipe==="keluar" && jumlah>w.saldo){
        alert("Saldo kurang!");
        return;
    }

    if(tipe==="masuk") w.saldo+=jumlah;
    else w.saldo-=jumlah;

    w.transaksi.push({
        tanggal:new Date().toLocaleDateString(),
        tipe, jumlah, keterangan:ket
    });

    simpan();
    updateTampilan();
}

function hapusTransaksi(index){
    let pass=prompt("Masukkan password untuk hapus:");
    if(pass!==PASSWORD){alert("Password salah!");return;}

    let w=dataWallets[currentWallet];
    let t=w.transaksi[index];

    if(t.tipe==="masuk") w.saldo-=t.jumlah;
    else w.saldo+=t.jumlah;

    w.transaksi.splice(index,1);

    simpan();
    updateTampilan();
}

function updateTampilan(){
    let w=dataWallets[currentWallet];

    document.getElementById("saldo").innerText=
        "Rp "+w.saldo.toLocaleString();

    let total=0;
    for(let dompet in dataWallets){
        total+=dataWallets[dompet].saldo;
    }

    document.getElementById("totalSemua").innerText=
        "Total Semua Dompet: Rp "+total.toLocaleString();

    let box=document.getElementById("riwayat");
    box.innerHTML="";

    w.transaksi.slice().reverse().forEach((t,i)=>{
        let indexAsli = w.transaksi.length - 1 - i;

        box.innerHTML+=`
        <div class="item">
            <div class="item-left">
                <div>${t.keterangan}</div>
                <small>${t.tanggal}</small><br>
                <span class="${t.tipe==='masuk'?'masuk':'keluar'}">
                ${t.tipe==='masuk'?'+':'-'}Rp ${t.jumlah.toLocaleString()}
                </span>
            </div>
            <button class="hapus-btn" onclick="hapusTransaksi(${indexAsli})">üóë</button>
        </div>`;
    });
}

function resetData(){
    let pass=prompt("Password:");
    if(pass!==PASSWORD){alert("Salah!");return;}

    dataWallets[currentWallet]={saldo:0,transaksi:[]};
    simpan();
    updateTampilan();
}

function tampilkanStatistika(){
    window.location.href="statistikamobile.html";
}

function simpan(){
    localStorage.setItem("dataWallets",JSON.stringify(dataWallets));
}
</script>

</body>
</html>
